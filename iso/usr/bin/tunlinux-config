#!/bin/sh

CONFIG_FILE="/etc/rc.conf"

show_config() {
    echo "Current TunLinux Configuration:"
    echo "================================"
    if [ -f "$CONFIG_FILE" ]; then
        cat "$CONFIG_FILE"
    else
        echo "Configuration file not found"
    fi
}

set_config() {
    local key="$1"
    local value="$2"
    
    if [ -f "$CONFIG_FILE" ]; then
        sed -i "s/^${key}=.*/${key}=${value}/" "$CONFIG_FILE"
    else
        echo "${key}=${value}" > "$CONFIG_FILE"
    fi
    
    echo "Set ${key}=${value}"
}

case "$1" in
    show)
        show_config
        ;;
    set)
        if [ -z "$2" ] || [ -z "$3" ]; then
            echo "Usage: $0 set <key> <value>"
            exit 1
        fi
        set_config "$2" "$3"
        ;;
    *)
        echo "Usage: $0 {show|set <key> <value>}"
        echo ""
        echo "Examples:"
        echo "  $0 show"
        echo "  $0 set INIT_SYSTEM runit"
        echo "  $0 set AUTO_LOGIN yes"
        exit 1
        ;;
esac 